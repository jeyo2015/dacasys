<div class="col-md-10 col-xs-10 col-md-offset-1 col-xs-offset-1 divContent" min-heigth style="overflow-y: auto" ng-show="validarPermisoFormulario('frmConsultores')">
    <div class="col-md-10 col-xs-12 col-md-offset-1">
        <div class="col-md-5 col-xs-11 ">
            <div class="row">
                <form class="">
                    <div class="form-group label-floating">
                        <label for="consultorioID" class="col-md-2 control-label">Buscar</label>
                        <div class="col-md-10">
                            <input type="text" ng-model="subString" class="form-control" id="buscarUusarioID">
                        </div>

                    </div>
                </form>
            </div>

            <div class="row" style="margin-top: 15px;">
                <div class="col-md-12 col-xs-12" max-heigth-table style="overflow-y: auto; padding-right: 0px;">
                    <table class="table table-hover tableStyle">
                        <thead>
                            <tr>
                                <th>Login</th>
                                <th>Nombre de Clinica</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="clinica in allClinicas | filterByWords:subString:'IDClinica,Latitud,Longitud,logoImagen,LogoParaMostrar,NombreArchivo,Descripcion,Direccion,Nit,FechaCreacion,FechaInicioLicencia,CantidadMeses,FechaModificacion,CantidadConsultorios,Consultorios,Estado,Trabajos,Telefonos,Status' "
                                style="cursor: pointer;" ng-class="{selectElement:clinicaSelected.Login==clinica.Login,deshabilitadaColor: !clinica.Estado}" ng-click="selectClinica(clinica)">
                                <td>{{clinica.Login}}</td>
                                <td>{{clinica.Nombre}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row">
                <button class="btn btn-raised btn-danger" ng-click="openModalConfirmDelele()" ng-disabled="clinicaSelected==null ||(clinicaSelected !=null && !clinicaSelected.Estado) || !validarPermisoComponente('btnEliminarClinica')">Eliminar </button>
                <button class="btn btn-raised btn-danger" ng-click="habilitarClinica()" ng-disabled="clinicaSelected==null ||(clinicaSelected !=null && clinicaSelected.Estado)">Habilitar </button>
            </div>


        </div>
        <div class="col-md-6 col-md-offset-1 col-xs-11">
            <div class="row">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label for="inpNombreClinicaid" class="col-md-3 control-label">
                            <required-field texto="Nombre Clinica:"> </required-field>
                        </label>

                        <div class="col-md-9">
                            <input type="text" class="form-control" id="inpNombreClinicaid" ng-model="clinicToSave.Nombre" maxlength="100" required>
                        </div>
                    </div>

                    <div id="grpLoginClinic" class="form-group">
                        <label for="inputEmail" class="col-md-3 control-label">
                            <required-field texto="Login Clinica:"> </required-field>
                        </label>

                        <div class="col-md-9">
                            <input type="text" class="form-control" id="inpLoginClinic" ng-model="clinicToSave.Login" required maxlength="50" ng-disabled="clinicToSave.Status==2">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-3">

                            <img style="height: 100px; width: 100px" data-ng-src="{{clinicaSeleccionada.LogoParaMostrar}}" alt="Logo consultorio ">
                        </div>
                        <div class="col-md-5">
                            <div class="fileupload-buttonbar">
                                <span class="btn btn-primary fileinput-button">
                                    <i class="fa fa-plus-circle" style="display: initial !important"></i>
                                    <span style="display: initial !important">Seleccione Logo...</span>
                                    <input id="fileupload" type="file" name="files[]">
                                </span>
                                <br />
                                <div id="progress" class="progress">
                                    <div class="progress-bar progress-bar-success"></div>
                                </div>
                                <div id="files" class="files"></div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">

                        <label for="Password3" class="col-md-3 control-label">Descripcion:</label>
                        <div class="col-md-9">
                            <textarea class="form-control" ng-model="clinicToSave.Descripcion" id="Password3" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inpdireccion" class="col-md-3 control-label">
                            <required-field texto="Direccion:"> </required-field>
                        </label>

                        <div class="col-md-9">
                            <input type="text" class="form-control" ng-model="clinicToSave.Direccion" id="Password2" maxlength="100" required>
                        </div>
                    </div>
                    <div class="form-group" ng-hide="clinicToSave.Trabajos.length>0|| trabajoClinicaSelected!= null">
                        <label for="inputTrabajo" class="col-md-3 control-label">Trabajos:</label>
                        <div class="col-md-7">
                            <input type="text" class="form-control" id="inputTrabajo" ng-model="primerTrabajo">
                        </div>

                        <div class="col-md-1" ng-show="primerTrabajo.length>0" title="Agregar trabajo">
                            <span ng-click="addTrabajo()"><i class="fa fa-check iconStyle"></i></span>
                        </div>
                    </div>
                    <div class="row form-group">
                        <label for="lnkMapa" class="col-md-3 control-label ">Ubicacion: </label>
                        <div class="col-md-9">
                            <a id="lnkMapa" ng-click="abrirModalDeMapa()">Ver mapa</a>
                        </div>
                    </div>
                    <div class="row " ng-show="clinicToSave.Trabajos.length>0 || trabajoClinicaSelected!= null">

                        <label class="col-md-3 control-label">
                            Trabajos:
                        </label>


                        <div id="tablaTrabajosClinicaId" class="col-md-7" style="max-height: 112px; overflow-y: auto; border: 2px solid #ddd; margin-bottom: 20px; padding-right: 0px; padding-left: 0px">
                            <div ng-repeat="trabajo in clinicToSave.Trabajos | filterDeleted" ng-click="selectTrabajoClinica(trabajo, $index)" style="cursor: pointer; height: 36px; padding: 8px 8px; border-bottom: 1px solid #ddd">
                                {{trabajo.Descripcion}}
                            </div>
                            <!-- <table class="table table-hover tableStyle scroll">
                                <tbody id="tablaTrabajosClinicaId">
                                    <tr ng-repeat="trabajo in clinicToSave.Trabajos | filterDeleted " ng-click="selectTrabajoClinica(trabajo, $index)" style="cursor: pointer;">
                                        <td>{{trabajo.Descripcion}}</td>
                                    </tr>
                                </tbody>
                            </table>-->
                        </div>
                        <div class="col-md-1">
                            <span ng-click="showNewRowTrabajoClinica()"><i class="fa fa-plus-circle iconStyle"></i></span>
                            <span ng-show="trabajoClinicaSelected!= null" ng-click="showUpdateRowTrabajoClinica()"><i class="fa fa-pencil-square-o iconStyle"></i></span>
                            <span ng-show="trabajoClinicaSelected!= null" ng-click="deleteTrabajoClinica()"><i class="fa fa-trash iconStyle"></i></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <label for="tableTelefonosClinicaID" class="col-md-3 control-label">Telefonos</label>
                            <div class="col-md-7" style="max-height: 150px; overflow-y: auto">
                                <table id="tableTelefonosClinicaID" class="table table-hover tableStyleTelefono " id="table2">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Telefono</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="telefono in clinicToSave.Telefonos" ng-click="selectTelefonoClinica(telefono,$index)">
                                            <td>{{telefono.Nombre}}</td>
                                            <td>{{telefono.Telefono}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-1">
                                <span ng-click="showNewRowTelefonoClinica()"><i class="fa fa-plus-circle iconStyle"></i></span>
                                <span ng-show="telefonoClinicaSelected!= null" ng-click="showUpdateTelefonoClinica()"><i class="fa fa-pencil-square-o iconStyle"></i></span>
                                <span ng-show="telefonoClinicaSelected!= null" ng-click="deleteTelefonoClinica()"><i class="fa fa-trash iconStyle"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-show=" clinicToSave.Status==2 && !mostrarModificarLicencia" style="padding: 10px 15px;">
                        <div class="col-md-12">
                            <label class="col-md-3 control-label">Licencia: </label>
                            <label style="color: #3B3B3C; text-align: left" class="col-md-7 control-label">{{clinicToSave.FechaInicioLicencia}} - {{clinicToSave.FechaFinLicencia}}</label>

                            <div class="col-md-1" style="margin-top: 6px">
                                <a data-toggle="modal" title="Editar el licencia" ng-click="mostrarCamposModificarLicencia()"><i class="fa fa-pencil-square-o "></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="form-group" ng-show=" mostrarModificarLicencia">
                        <label for="idIntervalo" class="col-md-3 control-label">
                            <required-field texto="Licencia:"> </required-field>
                        </label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" id="dtpFecha1" disabled="disabled">
                        </div>
                    </div>
                    <div class="form-group" ng-show=" mostrarModificarLicencia">
                        <label for="idIntervalo" class="col-md-3 control-label">
                            <required-field texto="Cantidad de meses:"> </required-field>
                        </label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" ng-model="clinicToSave.CantidadMeses" id="Text2" maxlength="10" validate="number" required>
                        </div>
                    </div>
                    <div class="row" ng-show=" clinicToSave.Status==2">
                        <div class="col-md-12">
                            <div class="col-md-10 ">
                                <table class="table table-hover tableStyle">
                                    <thead>
                                        <tr>
                                            <th>Login Consultorio</th>
                                            <th>Nit</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="cursor: pointer;" ng-class="{selectElement:consultorioSeleccionado.Login==consultorio.Login, deshabilitadaColor: !consultorio.Estado}" ng-repeat="consultorio in clinicToSave.Consultorios  " ng-click="selectConsultorio(consultorio)">
                                            <td>{{consultorio.Login}}</td>
                                            <td>{{consultorio.NIT}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class=" col-md-1">
                                <a data-toggle="modal" ng-click="openModalNewConsultorio()" title="Agregar un consultorio" ng-hide="!validarPermisoComponente('btnNuevoConsultorio')"><i class="fa fa-plus-circle iconStyle"></i></a>
                                <a data-toggle="modal" title="Editar el consultorio" ng-show="consultorioSeleccionado!= null && consultorioSeleccionado.Estado && validarPermisoComponente('btnModificarConsultorio')" ng-click="abrirModalModificarConsultorio()"><i class="fa fa-pencil-square-o iconStyle"></i></a>
                                <a title="Deshabilitar el consultorio" data-toggle="modal" ng-show="consultorioSeleccionado!= null &&  consultorioSeleccionado.Estado && validarPermisoComponente('btnEliminarConsultorio')" ng-click="abrirModaleliminarConsultorio()"><i class="fa fa-trash iconStyle"></i></a>
                                <a title="Habilitar el consultorio" ng-show="consultorioSeleccionado!= null && !consultorioSeleccionado.Estado && validarPermisoComponente('btnEliminarConsultorio')" ng-click="habilitarConsultorio()"><i class="fa fa-refresh iconStyle"></i></a>
                            </div>
                        </div>

                    </div>
                    <div class="form-group" ng-hide=" clinicToSave.Status==2">
                        <label for="inputNit" class="col-md-3 control-label">
                            <required-field texto="NIT consultorio:"> </required-field>
                        </label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" ng-model="consultorioToSave.NIT" id="inputNit" maxlength="10" validate="number" required>
                        </div>
                    </div>
                    <div class="form-group" ng-hide=" clinicToSave.Status==2">
                        <label for="inputEmail" class="col-md-3 control-label">
                            <required-field texto="Email consultorio:"> </required-field>
                        </label>
                        <div class="col-md-9">
                            <input type="email" class="form-control" ng-model="consultorioToSave.Email" id="inputEmail">
                        </div>
                    </div>
                    <div class="form-group" ng-hide=" clinicToSave.Status==2">
                        <label for="idIntervalo" class="col-md-3 control-label">
                            <required-field texto="Tiempo consulta:"> </required-field>
                        </label>
                        <div class="col-md-9">
                            <select class="form-control" id="Select1" ng-options="intervalo.Descripcion for intervalo in intervalos" ng-model="intervaloSelected"></select>
                        </div>
                    </div>
                    <div class="form-group" ng-hide=" clinicToSave.Status==2">
                        <label for="idIntervalo" class="col-md-3 control-label">
                            <required-field texto="Licencia:"> </required-field>
                        </label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" id="dtpFecha">
                        </div>
                    </div>
                    <div class="form-group" ng-show="clinicToSave.Status==1 ">
                        <label for="idIntervalo" class="col-md-3 control-label">
                            <required-field texto="Cantidad de meses:"> </required-field>
                        </label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" ng-model="clinicToSave.CantidadMeses" id="inputMeses" maxlength="10" validate="number" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-9 col-md-offset-3">
                            <button class="btn btn-raised btn-primary" ng-click="nuevaClinica()" ng-disabled="!validarPermisoComponente('btnNuevaClinica')">Nueva clinica</button>
                            <button class="btn btn-raised btn-primary" ng-click="guardarClinica()" ng-disabled="!validarPermisoComponente('btnModificarClinica')">Guardar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="confirm-delete" data-backdrop="static" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Deshabilitar Clinica</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <label>Esta seguro que quiere deshabilitar la clinica {{ clinicaSelected.Nombre }}?</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" ng-click="eliminarClinica()">Si</button>
                <button class="btn btn-danger" ng-click="closeWarnig()">No</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="confirmar-eliminar-consultorio" data-backdrop="static" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Deshabilitar Consultorio</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <label>Esta seguro que quiere deshabilitar el consultorio {{ consultorioSeleccionado.Login }}?</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" ng-click="eliminarConsultorio()">Aceptar</button>
                <button class="btn btn-danger" ng-click="salirModalElimnar()">Cancelar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-new-consultorio" data-backdrop="static" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Agregar Consultorio a la clinica {{clinicToSave.Nombre}}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="consultorioID" class="col-md-3 control-label">Login Consultorio:</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control" ng-disabled="true" ng-model="consultorioToSave.Login" id="consultorioID">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="nitConsultorio" class="col-md-3 control-label">NIT Consultorio:</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control" required ng-model="consultorioToSave.NIT" id="nitConsultorio" maxlength="10" validate="number">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="emailConsultorio" class="col-md-3 control-label">Email Consultorio:</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control" ng-model="consultorioToSave.Email" id="emailConsultorio">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="idIntervalo" class="col-md-3 control-label">Tiempo consulta:</label>
                            <div class="col-md-9">
                                <select class="form-control" id="idIntervalo" ng-options="intervalo.Descripcion for intervalo in intervalos" ng-model="intervaloSelected"></select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="Table1" class="col-md-3 control-label">Seleccione trabajo</label>
                            <div class="col-md-7">
                                <table id="Table1" class="table table-hover tableStyle scroll">
                                    <tbody>
                                        <tr ng-repeat="trabajo in clinicToSave.Trabajos" style="cursor: pointer;">
                                            <td>
                                                <input type="checkbox" ng-model="trabajo.checked" ng-click="selectTrabajoConsultorio(trabajo, $event)" />
                                            </td>
                                            <td>{{trabajo.Descripcion}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <label for="tableTelefonosID" class="col-md-3 control-label">Telefonos</label>
                                <div class="col-md-7" style="max-height: 150px; overflow-y: auto">
                                    <table id="tableTelefonosID" class="table table-hover tableStyleTelefono " id="table2">
                                        <thead>
                                            <tr>
                                                <th>Nombre</th>
                                                <th>Telefono</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="cursor: pointer;" ng-repeat="telefono in consultorioToSave.Telefonos" ng-click="selectTelefonoConsultorio(telefono,$index)">
                                                <td>{{telefono.Nombre}}</td>
                                                <td>{{telefono.Telefono}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-md-1">
                                    <span class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-plus-circle iconStyle"></i></span>
                                    <ul class="dropdown-menu">
                                        <li ng-click="addRowTable()"><a>Nuevo</a></li>
                                        <li ng-click="addRowTableFromClinica()"><a>Desde Clinica</a></li>
                                    </ul>
                                    <span ng-show="telefonoClinicaSelected!= null" ng-click="showUpdateTelefonoClinica()"><i class="fa fa-pencil-square-o iconStyle"></i></span>
                                    <span ng-show="telefonoClinicaSelected!= null" ng-click="deleteTelefonoClinica()"><i class="fa fa-trash iconStyle"></i></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" ng-click="guardarConsultorio()">Guardar</button>
                <button class="btn btn-danger" ng-click="salirModal()">Cancelar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-mapa-ubicacion" data-backdrop="static" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Seleccione una ubicacion en el mapa {{clinicToSave.Nombre}}</h4>
            </div>
            <div class="modal-body">
                <div id="mapaConsultorio" style="background-color: #fff; box-shadow: #CED2DB 0 1px 2px 0; margin-bottom: 5px; height: 300px">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn  btn-primary" ng-click="insertarUbicacionClinica()">Aceptar</button>
                <button class="btn btn-danger" ng-click="salirModalUbicacion()">Cancelar</button>
            </div>
        </div>
    </div>
</div>
